<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết xe - TKĐK</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="/css/styles.css">
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-color: #1f2937;
            --text-light: #6b7280;
            --background: #f8fafc;
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        /* Container */
        .car-detail-container {
            max-width: 1200px;
            margin: 100px auto 2rem;
            padding: 0 2rem;
        }

        /* Phần hình ảnh */
        .car-images-section {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .main-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 12px;
            transition: var(--transition);
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .thumbnail {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .thumbnail:hover,
        .thumbnail.active {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Grid cho content và form */
        .content-form-grid {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 2rem;
            align-items: start;
        }

        /* Phần content bên trái */
        .car-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
        }

        .car-header {
            margin-bottom: 2rem;
        }

        .car-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 1rem;
        }

        .car-price {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .car-status {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-available {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success-color);
        }

        /* Thông tin chủ xe */
        .owner-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem;
            background: var(--background);
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .owner-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid var(--primary-color);
        }

        .owner-details h4 {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .owner-details p {
            color: var(--text-light);
            font-size: 0.875rem;
        }

        /* Chi tiết xe */
        .car-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--background);
            border-radius: 12px;
            transition: var(--transition);
        }

        .detail-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .detail-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 10px;
            color: var(--primary-color);
        }

        /* Mô tả xe */
        .car-description {
            padding: 1.5rem;
            background: var(--background);
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .car-description h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        /* Tính năng xe */
        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: var(--background);
            border-radius: 10px;
            transition: var(--transition);
        }

        .feature-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .feature-item i {
            color: var(--success-color);
        }

        /* Form đặt xe */
        .rental-form-section {
            position: sticky;
            top: 2rem;
        }

        .rental-form {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* Tính giá */
        .price-calculator {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: var(--background);
            border-radius: 12px;
        }

        .price-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        .price-total {
            display: flex;
            justify-content: space-between;
            padding-top: 1rem;
            border-top: 2px solid var(--border-color);
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* Nút đặt xe */
        .btn-rent {
            width: 100%;
            padding: 1rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .btn-rent:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Popup styles */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 999;
            display: none;
        }

        .location-popup,
        .promo-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            width: 500px;
            max-width: 95%;
            max-height: 90vh;
            overflow-y: auto;
        }

        /* Map container */
        .location-map {
            width: 100%;
            height: 300px;
            margin-bottom: 1.5rem;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--border-color);
        }

        /* Delivery options */
        .delivery-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .delivery-option {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .delivery-option:hover {
            border-color: var(--primary-color);
            background: var(--background);
        }

        .delivery-option.active {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
        }

        /* Footer Styles */
        .footer {
            background: #1a1a1a;
            color: #fff;
            padding: 4rem 0 2rem;
            margin-top: 4rem;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
        }

        .footer-section h3 {
            color: #fff;
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .footer-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 0.75rem;
        }

        .footer-links a {
            color: #9ca3af;
            text-decoration: none;
            transition: color 0.3s ease;
            font-size: 0.95rem;
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        .footer-contact p {
            color: #9ca3af;
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .social-links a {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
        }

        .footer-bottom {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            color: #9ca3af;
            font-size: 0.9rem;
        }

        @media (max-width: 1024px) {
            .footer-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .footer-container {
                grid-template-columns: 1fr;
            }

            .footer {
                padding: 3rem 0 2rem;
            }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .content-form-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .rental-form-section {
                position: static;
            }

            .main-image {
                height: 400px;
            }
        }

        @media (max-width: 768px) {
            .car-detail-container {
                padding: 0 1rem;
                margin: 80px auto 2rem;
            }

            .main-image {
                height: 300px;
            }

            .car-details {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .features-list {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .car-images-section,
            .car-content,
            .rental-form {
                padding: 1.5rem;
            }

            .main-image {
                height: 250px;
            }

            .car-title {
                font-size: 1.5rem;
            }

            .car-price {
                font-size: 1.25rem;
            }
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>

    <script>
        // Initialize Google Maps
        let map;
        let marker;
        let autocomplete;

        function initMap() {
            const defaultLocation = { lat: 10.762622, lng: 106.660172 }; // Default to Ho Chi Minh City
            
            map = new google.maps.Map(document.getElementById('locationMap'), {
                center: defaultLocation,
                zoom: 13,
                styles: [
                    {
                        featureType: "poi",
                        elementType: "labels",
                        stylers: [{ visibility: "off" }]
                    }
                ]
            });

            marker = new google.maps.Marker({
                map: map,
                position: defaultLocation,
                draggable: true
            });

            // Initialize autocomplete
            autocomplete = new google.maps.places.Autocomplete(
                document.getElementById('customLocation'),
                { 
                    componentRestrictions: { country: 'vn' },
                    fields: ['formatted_address', 'geometry']
                }
            );

            autocomplete.addListener('place_changed', () => {
                const place = autocomplete.getPlace();
                if (place.geometry) {
                    map.setCenter(place.geometry.location);
                    marker.setPosition(place.geometry.location);
                }
            });

            // Update marker position when dragged
            marker.addListener('dragend', () => {
                const position = marker.getPosition();
                reverseGeocode(position);
            });
        }

        function reverseGeocode(position) {
            const geocoder = new google.maps.Geocoder();
            geocoder.geocode({ location: position }, (results, status) => {
                if (status === 'OK' && results[0]) {
                    document.getElementById('customLocation').value = results[0].formatted_address;
                }
            });
        }

        // Load map when popup opens
        function openLocationPopup() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('locationPopup').style.display = 'block';
            setTimeout(() => {
                if (!map) {
                    initMap();
                }
            }, 100);
        }

        // Update delivery location when confirming
        function confirmLocation() {
            const selectedOption = document.querySelector('.delivery-option.active');
            let locationText = '';
            
            if (selectedOption.querySelector('input').value === 'custom') {
                locationText = document.getElementById('customLocation').value;
            } else {
                locationText = selectedOption.querySelector('.delivery-title').textContent;
            }
            
            document.getElementById('deliveryLocation').value = locationText;
            closeLocationPopup();
        }
    </script>
</head>
<body>
    <div class="header">
        <div class="header-inner">
            <div class="logo-header">
                <img src="../public/image/AutomotiveCar.png" alt="TKĐK" class="logo">
            </div>
            <div class="menu-header">
                <ul class="menu">
                    <li class="menu-item"><a href="../public/index.html">Trang chủ</a></li>
                    <li class="menu-item"><a href="Xe4cho.html">Xe 4 chỗ</a></li>
                    <li class="menu-item"><a href="Xe7cho.html">Xe 7 chỗ</a></li>
                    <li class="menu-item"><a href="Xe16cho.html">Xe 16 chỗ</a></li>
                    <li class="menu-item"><a href="LienHe.html">Liên hệ</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="car-detail-container">
        <!-- Phần hình ảnh -->
        <div class="car-images-section">
            <img src="../public/image/MercedesC300.png" alt="Mercedes C300" class="main-image" id="mainImage">
            <div class="image-gallery">
                <img src="../public/image/MercedesC300.png" alt="Mercedes C300 - 1" class="thumbnail active" onclick="changeImage(this)">
                <img src="../public/image/MercedesC300.png" alt="Mercedes C300 - 2" class="thumbnail" onclick="changeImage(this)">
                <img src="../public/image/MercedesC300.png" alt="Mercedes C300 - 3" class="thumbnail" onclick="changeImage(this)">
                <img src="../public/image/MercedesC300.png" alt="Mercedes C300 - 4" class="thumbnail" onclick="changeImage(this)">
            </div>
        </div>

        <!-- Phần content và form -->
        <div class="content-form-grid">
            <!-- Phần content bên trái -->
            <div class="car-content">
                <div class="car-header">
                    <h1 class="car-title">Mercedes C300 AMG</h1>
                   
                    <span class="car-status status-available">
                        <i class="fas fa-check-circle"></i>
                        Có sẵn để thuê
                    </span>
                </div>

                <div class="owner-info">
                    <img src="https://ui-avatars.com/api/?name=Chu+Xe&background=2563eb&color=fff" alt="Chủ xe" class="owner-avatar">
                    <div class="owner-details">
                        <h4>Chủ xe: Minh Nhự</h4>
                        <p>Tỉ lệ phản hồi: 98% · Thời gian phản hồi: 5 phút</p>
                    </div>
                </div>
                <h3 style="margin-bottom: 10px;">Đặc điểm</h3>
                <div class="car-details">
                
                    <div class="detail-item">
                        <div class="detail-icon">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="detail-info">
                            <h4>Hãng xe</h4>
                            <p>Mercedes-Benz</p>
                        </div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon">
                            <i class="fa-solid fa-chair"></i>
                        </div>
                        <div class="detail-info">
                            <h4>Số ghế</h4>
                            <p>4 chỗ</p>
                        </div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <div class="detail-info">
                            <h4>Hộp số</h4>
                            <p>Tự động</p>
                        </div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon">
                            <i class="fas fa-gas-pump"></i>
                        </div>
                        <div class="detail-info">
                            <h4>Nhiên liệu</h4>
                            <p>Xăng</p>
                        </div>
                    </div>
                </div>

                <div class="car-description">
                    <h3>Mô tả</h3>
                    <p>Mercedes C300 AMG 2023 là một trong những mẫu sedan hạng sang được ưa chuộng nhất. Xe được trang bị động cơ 2.0L mạnh mẽ, nội thất sang trọng với nhiều công nghệ hiện đại, mang lại trải nghiệm lái tuyệt vời cho người thuê.</p>
                </div>
                <h3 style="margin-bottom: 10px;">Các tiện nghi </h3>
                <div class="features-list">
                    <div class="feature-item">
                        <i class="fas fa-check"></i>
                        <span>Định vị GPS</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check"></i>
                        <span>Camera 360°</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check"></i>
                        <span>Cảm biến lùi</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check"></i>
                        <span>Bluetooth</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check"></i>
                        <span>Bảo hiểm 2 chiều</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-check"></i>
                        <span>Ghế da cao cấp</span>
                    </div>
                </div>
            </div>

            <!-- Form đặt xe bên phải -->
            <div class="rental-form-section">
                <div class="rental-form">
                    <div class="car-price">6,200,000đ/ngày</div>
                    <div class="form-grid">
                        
                        <div class="form-group">
                           
                            <label for="startDate">Ngày bắt đầu</label>
                            <input type="date" id="startDate" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="endDate">Ngày kết thúc</label>
                            <input type="date" id="endDate" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="deliveryLocation">Địa điểm giao nhận xe</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="text" id="deliveryLocation" class="form-control" readonly 
                                placeholder="Chọn địa điểm giao nhận xe" 
                                onclick="openLocationPopup()"
                                style="background-color: #fff; cursor: pointer;">
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="promoCode">Mã khuyến mãi</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="text" id="promoCode" class="form-control" placeholder="Nhập mã khuyến mãi">
                            <button onclick="checkPromoCode()" class="btn-check-promo" style="padding: 0.75rem 1rem; background: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer;">
                                Áp dụng
                            </button>
                        </div>
                        <span id="promoMessage" style="font-size: 0.875rem; margin-top: 0.5rem; display: none;"></span>
                    </div>

                    <div class="price-calculator">
                        <div class="price-item">
                            <span>Giá thuê (3 ngày)</span>
                            <span>18,600,000đ</span>
                        </div>
                        <div class="price-item">
                            <span>Phí dịch vụ</span>
                            <span>100,000đ</span>
                        </div>
                        <div class="price-item">
                            <span>Giảm giá</span>
                            <span>-100,000đ</span>
                        </div>
                        <div class="price-total">
                            <span>Tổng cộng</span>
                            <span>18,600,000đ</span>
                        </div>
                    </div>

                    <button class="btn-rent" onclick="rentCar()">
                        <i class="fas fa-car"></i>
                        Thuê xe ngay
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="promo-popup" id="promoPopup">
        <span class="close" onclick="closePromoPopup()">&times;</span>
        <h3>Chọn mã khuyến mãi</h3>
        <div class="promo-list">
            <div class="promo-item" onclick="selectPromo('DISCOUNT10', '10%')">
                <div class="promo-icon">
                    <i class="fas fa-ticket-alt"></i>
                </div>
                <div class="promo-info">
                    <div class="promo-code">DISCOUNT10</div>
                    <div class="promo-description">Giảm 10% tổng giá trị đơn hàng</div>
                </div>
                <button class="promo-action">Áp dụng</button>
            </div>
            <div class="promo-item" onclick="selectPromo('DISCOUNT20', '20%')">
                <div class="promo-icon">
                    <i class="fas fa-ticket-alt"></i>
                </div>
                <div class="promo-info">
                    <div class="promo-code">DISCOUNT20</div>
                    <div class="promo-description">Giảm 20% tổng giá trị đơn hàng</div>
                </div>
                <button class="promo-action">Áp dụng</button>
            </div>
            <div class="promo-item" onclick="selectPromo('SUMMER2025', '15%')">
                <div class="promo-icon">
                    <i class="fas fa-ticket-alt"></i>
                </div>
                <div class="promo-info">
                    <div class="promo-code">SUMMER2025</div>
                    <div class="promo-description">Giảm 15% cho chương trình hè 2025</div>
                </div>
                <button class="promo-action">Áp dụng</button>
            </div>
        </div>
    </div>

    <!-- Popup địa điểm giao nhận xe -->
    <div class="location-popup" id="locationPopup">
        <span class="close" onclick="closeLocationPopup()">&times;</span>
        <h3>Địa điểm giao nhận xe</h3>
        
        <div class="location-map" id="locationMap">
            <!-- Map sẽ được load vào đây -->
        </div>

        <div class="delivery-options">
            <div class="delivery-option active" onclick="selectDeliveryOption(this, 'address')">
                <input type="radio" name="deliveryType" value="address" checked>
                <div class="delivery-info">
                    <div class="delivery-title">Nhận xe tại vị trí xe</div>
                    <div class="delivery-description">
                        Quận Bình Thạnh, TP Hồ Chí Minh
                    </div>
                    <div class="delivery-description">
                        Bạn sẽ nhận và trả xe tại vị trí xe (Địa chỉ cụ thể sẽ được hiển thị sau khi thanh toán thành công)
                    </div>
                </div>
            </div>

            <div class="delivery-option" onclick="selectDeliveryOption(this, 'custom')">
                <input type="radio" name="deliveryType" value="custom">
                <div class="delivery-info">
                    <div class="delivery-title">Chọn tự bản đồ</div>
                    <div class="location-search">
                        <input type="text" placeholder="Chọn địa chỉ giao nhận xe" id="customLocation">
                    </div>
                </div>
            </div>

            <div class="delivery-option" onclick="selectDeliveryOption(this, 'airport')">
                <input type="radio" name="deliveryType" value="airport">
                <div class="delivery-info">
                    <div class="delivery-title">Giao xe sân bay</div>
                    <div class="delivery-description">Tân Sơn Nhất</div>
                </div>
            </div>
        </div>

        <div class="delivery-details">
            Giao xe tận nơi trong: <span id="deliveryRadius">10</span> km<br>
            Phí giao nhận xe (2 chiều): <span id="deliveryFee">15.000đ/km</span>
        </div>

        <button class="btn-confirm-location" onclick="confirmLocation()">Thay đổi</button>
    </div>

    <script>
        function changeImage(element) {
            document.getElementById('mainImage').src = element.src;
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            element.classList.add('active');
        }

        function rentCar() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            if (!startDate || !endDate) {
                alert('Vui lòng chọn ngày thuê xe');
                return;
            }

            const start = new Date(startDate);
            const end = new Date(endDate);

            if (start >= end) {
                alert('Ngày kết thúc phải sau ngày bắt đầu');
                return;
            }

            // TODO: Implement booking logic
            alert('Đang xử lý yêu cầu thuê xe...');
        }

        // Calculate rental duration and update price
        let currentDiscount = 0;
        function updatePrice() {
            const startDate = new Date(document.getElementById('startDate').value);
            const endDate = new Date(document.getElementById('endDate').value);

            if (startDate && endDate && startDate < endDate) {
                const days = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
                const basePrice = 6200000; // Price per day
                const totalRent = basePrice * days;
                const serviceFee = 100000;
                const total = totalRent + serviceFee - currentDiscount;

                document.querySelector('.price-item:first-child span:last-child').textContent = 
                    `${formatCurrency(totalRent)}`;
                document.querySelector('.price-item:nth-child(3) span:last-child').textContent = 
                    `${formatCurrency(-currentDiscount)}`;
                document.querySelector('.price-total span:last-child').textContent = 
                    `${formatCurrency(total)}`;
            }
        }

        // Format currency in VND
        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            }).format(amount);
        }

        // Add event listeners for date inputs
        document.getElementById('startDate').addEventListener('change', updatePrice);
        document.getElementById('endDate').addEventListener('change', updatePrice);

        // Set minimum dates
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(tomorrow.getDate() + 1);

        document.getElementById('startDate').min = today.toISOString().split('T')[0];
        document.getElementById('endDate').min = tomorrow.toISOString().split('T')[0];

        // Check promo code
        function checkPromoCode() {
            const promoCode = document.getElementById('promoCode').value.trim().toUpperCase();
            const promoMessage = document.getElementById('promoMessage');

            // Simulated promo codes - in real application, these should be verified with the server
            const promoCodes = {
                'DISCOUNT10': { discount: 0.1, message: 'Giảm 10% tổng giá trị đơn hàng' },
                'DISCOUNT20': { discount: 0.2, message: 'Giảm 20% tổng giá trị đơn hàng' },
                'SUMMER2025': { discount: 0.15, message: 'Giảm 15% cho chương trình hè 2025' }
            };

            if (promoCodes[promoCode]) {
                const startDate = new Date(document.getElementById('startDate').value);
                const endDate = new Date(document.getElementById('endDate').value);
                
                if (!startDate || !endDate) {
                    promoMessage.textContent = "Vui lòng chọn ngày thuê trước khi áp dụng mã giảm giá";
                    promoMessage.style.color = "red";
                    promoMessage.style.display = "block";
                    return;
                }

                const days = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
                const basePrice = 6200000 * days;
                currentDiscount = basePrice * promoCodes[promoCode].discount;
                
                promoMessage.textContent = `${promoCodes[promoCode].message} (-${formatCurrency(currentDiscount)})`;
                promoMessage.style.color = "green";
                promoMessage.style.display = "block";
                updatePrice();
            } else {
                promoMessage.textContent = "Mã khuyến mãi không hợp lệ hoặc đã hết hạn.";
                promoMessage.style.color = "red";
                promoMessage.style.display = "block";
                currentDiscount = 0;
                updatePrice();
            }
        }

        // Show promo popup when clicking on promo input
        document.getElementById('promoCode').addEventListener('click', function() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('promoPopup').style.display = 'block';
        });

        // Close promo popup
        function closePromoPopup() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('promoPopup').style.display = 'none';
        }

        // Select promo code
        function selectPromo(code, discount) {
            document.getElementById('promoCode').value = code;
            checkPromoCode();
            closePromoPopup();
        }

        // Close popup when clicking overlay
        document.getElementById('overlay').addEventListener('click', closePromoPopup);

        // Open location popup
        function openLocationPopup() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('locationPopup').style.display = 'block';
            setTimeout(() => {
                if (!map) {
                    initMap();
                }
            }, 100);
        }

        // Close location popup
        function closeLocationPopup() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('locationPopup').style.display = 'none';
        }

        // Select delivery option
        function selectDeliveryOption(element, type) {
            document.querySelectorAll('.delivery-option').forEach(option => {
                option.classList.remove('active');
            });
            element.classList.add('active');
        }

        // Confirm location
        function confirmLocation() {
            const selectedOption = document.querySelector('.delivery-option.active .delivery-title').textContent;
            document.getElementById('deliveryLocation').value = selectedOption;
            closeLocationPopup();
        }
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Liên hệ</h3>
                    <div class="footer-contact">
                        <div class="contact-item-footer">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>HuTech</span>
                        </div>
                        <div class="contact-item-footer">
                            <i class="fas fa-phone"></i>
                            <span>0397468827</span>
                        </div>
                        <div class="contact-item-footer">
                            <i class="fas fa-envelope"></i>
                            <span>dinhkhanhvn.2004@gmail.com</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <a href="/views/AdminLogin.html" class="admin-login">
                    <p>&copy; 2025 TKĐK. Tất cả quyền được bảo lưu.</p>
                </a>
            </div>
        </div>
    </footer>

</body>
</html>